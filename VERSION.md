# 版本信息

## 当前版本：v3.3.0

**发布日期**：2026-01-15

**版本类型**：重大功能更新 - 评测体系与 AI 增强

---

## 版本特性总览

### 核心功能

1. **CrewAI 多 Agent 系统** - 真正的多智能体架构，Agent 自主决策 ⭐核心特性
2. **RAG 记忆检索** - 语义检索历史对话，长对话支持 ⭐v3.2
3. **评测体系** - CPD、DE、OOC 三大量化指标 ⭐v3.3
4. **Few-shot 剧本模版** - 悬疑、喜剧、现实主义三种风格 ⭐v3.3
5. **独立记忆系统** - 每个角色拥有群聊+私聊双记忆
6. **智能发言决策** - Agent 自主判断是否发言
7. **自主对话模式** - Agent 自动互动，无需用户输入
8. **预设管理** - 快速导入导出场景配置
9. **对话持久化** - 导出/导入对话历史

### 技术栈

- **AI 框架**: CrewAI 1.7.2+ - 多智能体协作
- **LLM 模型**: Google Gemini 2.0 Flash / 1.5 Pro / 1.5 Flash
- **向量数据库**: ChromaDB 0.4.0+ - RAG 记忆检索
- **UI 框架**: Streamlit 1.52.2+
- **Python 版本**: 3.10+

### 快速开始

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行应用
streamlit run app.py

# 3. 在侧边栏输入 Gemini API Key

# 4. 开始对话！
```

---

## 重大更新亮点

### v3.3.0（当前版本）- 评测体系与 AI 增强

**发布日期**：2026-01-15

**核心更新**：

1. **评测体系** - 量化质量评估
   - ✅ CPD（人设离散度）指标
   - ✅ DE（对话有效率）指标
   - ✅ OOC（出戏率）检测
   - ✅ 8组标注测试数据集
   - ✅ 11个 Bad Case 库
   - ✅ 自动化评测脚本

2. **Few-shot 剧本模版** - 风格化对话
   - ✅ 悬疑话剧风格模版
   - ✅ 喜剧话剧风格模版
   - ✅ 现实主义话剧风格模版
   - ✅ 模版管理系统
   - ✅ UI 集成

3. **导演系统**（实验性）
   - ✅ 编剧 Agent（剧情规划）
   - ✅ 导演 Agent（任务分配）
   - ✅ 审核 Agent（质量检查）
   - ✅ 四阶段流水线架构

**文档更新**：
- ✅ EVALUATION_SYSTEM_GUIDE.md
- ✅ prompt.md（完整 Prompt 设计说明）
- ✅ USER_MANUAL.md（完整用户手册）
- ✅ TROUBLESHOOTING.md（故障排查指南）

---

### v3.2.0 - RAG 记忆检索

**发布日期**：2026-01-10

**核心更新**：

1. **RAG 系统集成**
   - ✅ ChromaDB 向量数据库
   - ✅ 混合检索（关键词+语义）
   - ✅ 支持长对话（>50条消息）
   - ✅ 自动降级机制

2. **记忆检索策略**
   - ✅ 关键词精确匹配
   - ✅ 语义相似度检索
   - ✅ 时间窗口补充

**文档**：
- ✅ RAG_GUIDE.md
- ✅ RAG_QUICKSTART.md
- ✅ RAG_SUMMARY.md

---

### v3.1.0 - 用户体验优化

**发布日期**：2026-01-08

**核心更新**：

1. **轮流发言模式**
   - 一次只有一个角色发言
   - 按顺序轮流
   - 保证对话连贯性

2. **预设系统优化**
   - 加载时不刷新页面
   - 预设应用更流畅

---

### v3.0.0 - CrewAI 架构重构

**发布日期**：2026-01-07

**核心更新**：

1. **CrewAI 多 Agent 系统**
   - ✅ 真正的多智能体架构
   - ✅ Agent 自主决策
   - ✅ 智能发言/沉默机制
   - ✅ 自动降级到传统模式

2. **独立记忆系统**
   - ✅ 每个 Agent 独立记忆
   - ✅ 群聊+私聊分离
   - ✅ 私密信息保护

**文档**：
- ✅ README_v3.md
- ✅ CREWAI_GUIDE.md
- ✅ API.md

---

## 版本路线图

### v3.4.0（计划中）- 导演系统集成
**预计发布**：2026-01-20

- [ ] 导演系统集成到主应用
- [ ] UI 控制开关
- [ ] 性能优化（减少响应时间）
- [ ] 更多剧本模版（科幻、武侠）

### v3.5.0（未来计划）- 多模态支持
**预计发布**：2026-02

- [ ] 图像输入支持
- [ ] 场景图片理解
- [ ] 角色头像生成
- [ ] 语音输入/输出

### v4.0.0（远期计划）- 云端协作
**预计发布**：2026-Q2

- [ ] 多用户协作模式
- [ ] 云端对话保存
- [ ] 角色市场（分享自定义角色）
- [ ] Web API 接口

---

## 已完成功能（v3.3.0）

### 核心系统
- [x] CrewAI 多 Agent 架构
- [x] 独立记忆系统（群聊+私聊）
- [x] RAG 记忆检索
- [x] 智能发言决策
- [x] 自主对话模式
- [x] 自动降级机制

### AI 增强
- [x] Few-shot 剧本模版（3种）
- [x] 评测体系（CPD、DE、OOC）
- [x] Bad Case 库（11个案例）
- [x] 导演系统（实验性）

### UI/UX
- [x] Streamlit Web 界面
- [x] 预设导入/导出
- [x] 对话导出/加载
- [x] 角色记忆查看
- [x] RAG 检索结果展示
- [x] 实时状态提示

### 文档体系
- [x] README.md - 项目主页
- [x] USER_MANUAL.md - 完整用户手册
- [x] TROUBLESHOOTING.md - 故障排查
- [x] API.md - API 文档
- [x] CREWAI_GUIDE.md - CrewAI 技术指南
- [x] RAG_GUIDE.md - RAG 深度指南
- [x] EVALUATION_SYSTEM_GUIDE.md - 评测体系
- [x] prompt.md - Prompt 设计
- [x] DEPLOYMENT.md - 部署指南
- [x] CHANGELOG.md - 完整版本历史

---

## 技术指标

### 性能指标（v3.3.0）

| 指标 | 传统模式 | CrewAI 模式 | CrewAI + RAG |
|------|---------|------------|-------------|
| 响应时间 | 1.2s | 2.5s | 3.0s |
| 对话质量（CPD） | 45-55 | 60-70 | 65-75 |
| 对话质量（DE） | 70-80 | 85-95 | 90-100 |
| OOC 率 | 10-20% | 5-15% | 3-10% |
| 支持对话长度 | <30 条 | <50 条 | >200 条 |

### 评测结果（基于 test_dataset.json）

- **总场景数**：8 个
- **通过率**：16.7%（严格标准）
- **平均 CPD**：64.5（中等偏上）
- **平均 DE**：100（优秀）
- **平均 OOC**：0%（需 API Key 测试）

---

## 更新日志

详细的版本变更历史请查看 [CHANGELOG.md](./CHANGELOG.md)

---

## 相关资源

### 文档中心
- [用户手册](USER_MANUAL.md) - 从零到精通
- [故障排查](TROUBLESHOOTING.md) - 常见问题解决
- [API 文档](API.md) - 技术细节
- [文档导航](DOCS.md) - 所有文档索引

### 技术指南
- [CrewAI 架构](CREWAI_GUIDE.md) - 多 Agent 系统详解
- [RAG 系统](RAG_GUIDE.md) - 记忆检索深度指南
- [评测体系](EVALUATION_SYSTEM_GUIDE.md) - 质量评估指南
- [Prompt 设计](prompt.md) - Prompt 工程详解

### 部署与发布
- [部署指南](DEPLOYMENT.md) - 本地运行与在线部署
- [发布清单](RELEASE_CHECKLIST.md) - GitHub 发布步骤

---

## 反馈与支持

- **GitHub Issues**: [提交问题](https://github.com/yourusername/groupchat/issues)
- **GitHub Discussions**: [参与讨论](https://github.com/yourusername/groupchat/discussions)
- **文档中心**: [查看所有文档](DOCS.md)

---

## 许可证

MIT License - 可自由商用和修改

---

**当前版本 v3.3.0 已实现完整的多智能体对话系统 + 评测体系 + AI 增强功能！** ✅
